<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:annotation-config/>

    <bean id="q.producer.config" class="com.bocsoft.bfw.queue.QConfig">
        <property name="propsFile" value="/kafka-producer.properties"/>
    </bean>

    <bean id="q.consumer.config" class="com.bocsoft.bfw.queue.QConfig">
        <property name="propsFile" value="/kafka-consumer.properties"/>
    </bean>

    <bean id="q.kafka.producer.factory" class="com.bocsoft.bfw.queue.kafka.KafkaQProducerFactory">
        <property name="config" ref="q.producer.config"/>
    </bean>
    <bean id="q.kafka.consumer.factory" class="com.bocsoft.bfw.queue.kafka.KafkaQConsumerFactory">
        <property name="config" ref="q.consumer.config"/>
    </bean>

    <bean id="q.consumer.executor" class="org.springframework.scheduling.concurrent.ThreadPoolExecutorFactoryBean">
        <property name="corePoolSize" value="3"/>
        <property name="maxPoolSize" value="10"/>
    </bean>

    <bean id="q.test" class="com.bocsoft.bfw.queue.demo.BootTest">
        <property name="producerFactory" ref="q.kafka.producer.factory"/>
        <property name="consumerFactory" ref="q.kafka.consumer.factory"/>
        <property name="topic" value="q-test-topic"/>
        <property name="executor" ref="q.consumer.executor"/>
    </bean>

</beans>